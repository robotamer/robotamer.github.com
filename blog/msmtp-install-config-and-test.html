<!doctype html>
<html>
  <head>
  <title>msmtp install, config and test</title>
  <meta name="description" content="">
  <meta name="keywords" content="RoboTamer">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link href="http://localhost:1313/static/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="http://localhost:1313/static/css/styles.css" rel="stylesheet"/>
    <link href="http://localhost:1313/static/css/hugoicon.css" rel="stylesheet"/>


  </head>
  <body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="http://localhost:1313/"><img src="http://localhost:1313/static/img/robotamer82-100.png" alt="Logo" width="20" height="25">&nbsp; RoboTamer</a>
  </div>

  
  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">
    
      <li><a href="http://localhost:1313/blog.html">&nbsp; Blog &nbsp;</a></li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
        <ul class="dropdown-menu">
            
            <li hugo-nav="/blog/network-safety-restart/html"><a href="http://localhost:1313/blog/network-safety-restart/html"> Network Safety Restart </a> </li>
            
            <li hugo-nav="/blog/search-linux-bash-history-2/html"><a href="http://localhost:1313/blog/search-linux-bash-history-2/html"> Search linux bash history </a> </li>
            
            <li hugo-nav="/blog/search-linux-bash-history/html"><a href="http://localhost:1313/blog/search-linux-bash-history/html"> Search linux bash history </a> </li>
            
            <li hugo-nav="/blog/2010-03-07-9.html"><a href="http://localhost:1313/blog/2010-03-07-9.html"> Netbeans error </a> </li>
            
            <li hugo-nav="/linux/index.html"><a href="http://localhost:1313/linux/index.html"> Linux Index </a> </li>
            
            <li hugo-nav="/linux/snippets.html"><a href="http://localhost:1313/linux/snippets.html"> Linux Snippets </a> </li>
            
            <li hugo-nav="/linux/nsr.html"><a href="http://localhost:1313/linux/nsr.html"> Network Safety Restart Bash Script </a> </li>
            
            <li hugo-nav="/linux/ssh.html"><a href="http://localhost:1313/linux/ssh.html"> ssh </a> </li>
            
            <li hugo-nav="/linux/lxc.html"><a href="http://localhost:1313/linux/lxc.html"> Linux Containers </a> </li>
            
            <li hugo-nav="/linux/git.html"><a href="http://localhost:1313/linux/git.html"> Git Howto </a> </li>
            
            <li hugo-nav="/linux/mail-server-fingerprint.html"><a href="http://localhost:1313/linux/mail-server-fingerprint.html"> Mail Server Fingerprint </a> </li>
            
            <li hugo-nav="/linux/bridge-utils.html"><a href="http://localhost:1313/linux/bridge-utils.html"> Bridge-Utils for LXC </a> </li>
            
            <li hugo-nav="/linux/msmtp.html"><a href="http://localhost:1313/linux/msmtp.html"> msmtp </a> </li>
            
            <li hugo-nav="/linux/utf-8.html"><a href="http://localhost:1313/linux/utf-8.html"> UTF-8 Character List </a> </li>
            
            <li hugo-nav="/linux/sendmail.html"><a href="http://localhost:1313/linux/sendmail.html"> Send mail with sendmail </a> </li>
            
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Go <b class="caret"></b></a>
        <ul class="dropdown-menu">
            
            <li hugo-nav="/blog/sbs/html"><a href="http://localhost:1313/blog/sbs/html"> Saving structs in a leveldb </a> </li>
            
            <li hugo-nav="/code/go/gotamer/gowatch.html"><a href="http://localhost:1313/code/go/gotamer/gowatch.html"> GoWatch </a> </li>
            
            <li hugo-nav="/code/go/gotamer/index.html"><a href="http://localhost:1313/code/go/gotamer/index.html"> Gophy </a> </li>
            
            <li hugo-nav="/code/go/gotamer/jgdb.html"><a href="http://localhost:1313/code/go/gotamer/jgdb.html"> jgdb </a> </li>
            
            <li hugo-nav="/code/go/gotamer/mail.html"><a href="http://localhost:1313/code/go/gotamer/mail.html"> Smtp </a> </li>
            
            <li hugo-nav="/code/go/gotamer/ping.html"><a href="http://localhost:1313/code/go/gotamer/ping.html"> Ping </a> </li>
            
            <li hugo-nav="/code/go/gotamer/sbs.html"><a href="http://localhost:1313/code/go/gotamer/sbs.html"> sbs </a> </li>
            
            <li hugo-nav="/code/go/gotamer/tools.html"><a href="http://localhost:1313/code/go/gotamer/tools.html"> Tools </a> </li>
            
            <li hugo-nav="/code/go/index.html"><a href="http://localhost:1313/code/go/index.html"> ï»¿Snippets </a> </li>
            
            <li hugo-nav="/code/go/gotamer/session.html"><a href="http://localhost:1313/code/go/gotamer/session.html"> Session </a> </li>
            
            <li hugo-nav="/code/go/gotamer/crypt.html"><a href="http://localhost:1313/code/go/gotamer/crypt.html"> Crypt </a> </li>
            
            <li hugo-nav="/code/go/gotamer/cases.html"><a href="http://localhost:1313/code/go/gotamer/cases.html"> Cases </a> </li>
            
            <li hugo-nav="/code/go/gotamer/cfg.html"><a href="http://localhost:1313/code/go/gotamer/cfg.html"> Cfg </a> </li>
            
            <li hugo-nav="/linux/utf-8.html"><a href="http://localhost:1313/linux/utf-8.html"> UTF-8 Character List </a> </li>
            
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">PHP <b class="caret"></b></a>
        <ul class="dropdown-menu">
            
            <li hugo-nav="/blog/get-php-files-in-dir-with-recursive-lambda-callback-function/html"><a href="http://localhost:1313/blog/get-php-files-in-dir-with-recursive-lambda-callback-function/html"> Get php files in dir with recursive lambda callback function </a> </li>
            
            <li hugo-nav="/blog/splclassloader-implementation/html"><a href="http://localhost:1313/blog/splclassloader-implementation/html"> SplClassLoader Implementation </a> </li>
            
            <li hugo-nav="/blog/messenger-laravel-framework/html"><a href="http://localhost:1313/blog/messenger-laravel-framework/html"> Messenger Laravel Framework </a> </li>
            
            <li hugo-nav="/blog/2010-03-18-7.html"><a href="http://localhost:1313/blog/2010-03-18-7.html"> Creating models for the Zend Framework from command line via phpcli. </a> </li>
            
            <li hugo-nav="/blog/2008-04-27-21.html"><a href="http://localhost:1313/blog/2008-04-27-21.html"> Tamer ACL </a> </li>
            
            <li hugo-nav="/code/php/phptamer/index.html"><a href="http://localhost:1313/code/php/phptamer/index.html"> PHPTamer </a> </li>
            
            <li hugo-nav="/code/php/phptamer/rtsingleton.html"><a href="http://localhost:1313/code/php/phptamer/rtsingleton.html"> Singleton </a> </li>
            
            <li hugo-nav="/code/php/phptamer/rtcrypter.html"><a href="http://localhost:1313/code/php/phptamer/rtcrypter.html"> Crypter </a> </li>
            
            <li hugo-nav="/code/php/phptamer/facade.html"><a href="http://localhost:1313/code/php/phptamer/facade.html"> Facade </a> </li>
            
            <li hugo-nav="/linux/utf-8.html"><a href="http://localhost:1313/linux/utf-8.html"> UTF-8 Character List </a> </li>
            
        </ul>
      </li>

      <li><a href="http://localhost:1313/feeds.html">&nbsp; Feeds &nbsp;</a></li>


    </ul>

    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Meta <b class="caret"></b></a>
        <ul class="dropdown-menu">
            
            <li hugo-nav="/about.html"><a href="http://localhost:1313/about.html"> My little space on the net </a> </li>
            
            <li hugo-nav="/license.html"><a href="http://localhost:1313/license.html"> Copyright </a> </li>
            
        </ul>
      </li>
      <li><a href="http://bitbucket.org/robotamer"><i class="icon-octocat icon-2x"> </i></a></li>
    </ul>
  </div>
</nav>

    <div class="container">
      <div class="row">
        <div class="col-md-12">

<div class="panel panel-default">
  <div class="panel-heading">
  	<h2>msmtp install, config and test</h2>
	<h4></h4>
  </div>
  <div class="panel-body">
  <p>Why have more then one mail server? Or why even have a mail server at all, if you can use gmail?
Well there are many reasons to have at leased one mail server, but having one on each server doesn&rsquo;t make sense at all.
I tried both ssmtp and msmtp, and decided on msmtp.
&lt;!&ndash; more &ndash;&gt;</p>

<h3>msmtp is an SMTP client.</h3>

<p>In the default mode, it transmits a mail to an SMTP server, which takes care of further delivery.
To use this program with your mail user agent (MUA), create a configuration  file with your mail account(s) and tell your MUA to call msmtp instead of  /usr/sbin/sendmail.
<strong>Features include:</strong></p>

<ul>
<li><p>Sendmail compatible interface (command line options and exit codes).</p></li>

<li><p>TLS/SSL support, including client certificates.</p></li>

<li><p>Authentication methods PLAIN, LOGIN, CRAM-MD5, EXTERNAL, GSSAPI, SCRAM-SHA-1, DIGEST-MD5, and NTLM.</p></li>

<li><p>PIPELINING support for increased transmission speed.</p></li>

<li><p>DSN (Delivery Status Notification) support.</p></li>

<li><p>RMQS (Remote Message Queue Starting) support (ETRN keyword).</p></li>

<li><p>IPv6 support.</p></li>

<li><p>LMTP support.</p></li>

<li><p>Support for multiple accounts.</p></li>
</ul>

<p>msmtp is <a href="http://www.gnu.org/philosophy/free-sw.html">free software</a>; you can redistribute it and/or modify it under the terms of the  <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a> as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p>

<hr />

<h3>Requirements</h3>

<p><strong>Platforms</strong></p>

<p>msmtp runs on a wide variety of platforms. It needs little more than an ANSI C  compiler and Berkeley-style sockets.
<strong>Libraries</strong>
msmtp does not need any additional libraries, but it can use the following to enhance its feature set:</p>

<ul>
<li><p><a href="http://www.gnu.org/software/gnutls/">GnuTLS</a> (&gt;=1.2.0)
The GnuTLS library provides TLS/SSL support. It is highly recommended.</p></li>

<li><p><a href="http://www.openssl.org/">OpenSSL</a> (&gt;=0.9.6)
OpenSSL is supported as an alternative to GnuTLS.</p></li>

<li><p><a href="http://josefsson.org/libgsasl/">GNU SASL</a> (&gt;=0.2.4)
Using the GNU SASL library adds support for the GSSAPI, DIGEST-MD5, SCRAM-SHA-1, and NTLM  authentication methods. (The methods PLAIN, LOGIN, and CRAM-MD5  are always supported).</p></li>

<li><p><a href="http://www.gnu.org/software/libidn/">GNU Libidn</a>
Support for Internationalized Domain Names (IDN) is available if you have GNU  Libidn installed.</p></li>
</ul>

<h3>install</h3>

<pre><code>apt-get install msmtp
</code></pre>

<h3>configure</h3>

<p>Below you will see that I commented out tls_trust_file and went with tls_fingerprint.
You can not use both at the same time, and I figure that tls_fingerprint is faster, however the gmail finger print may change over the years so going with tls_trust_file is probably safer.</p>

<pre><code># /etc/msmtprc
defaults
logfile         ~/.msmtp.log
#tls_trust_file /etc/ssl/certs/ca-certificates.crt

account         default
host            smtp.gmail.com
port            587
from            xxxxx@gmail.com
auth            on
user            xxxxx@gmail.com
password        *******
tls             on
tls_starttls    on
tls_fingerprint DB:A0:2A:07:00:F9:E3:23:7D:07:E7:52:3C:95:9D:E6:7E:12:54:3F
logfile         /var/log/msmtp.log
</code></pre>

<h3>Test</h3>

<p>Send out a test mail:</p>

<pre><code>echo -e &quot;Subject: msmtp test mailnThis is a test mail from msmtp&quot; | msmtp --debug --from=default -t xxxxx@gmail.com
</code></pre>

<p><a href="http://msmtp.sourceforge.net/">Link to developer site</a></p>

  </div>
  <div class="panel-footer">
    <div class="btn-group">
      
    </div>  
  </div>
</div>
        </div>
      </div>
    </div>

    <div class="container">
      <hr>
      <footer id="footer">Copyright &copy; 1998 - 2013 RoboTamer</footer>
    </div>
      <script src="http://localhost:1313/static/js/jquery.js"></script>
      <script src="http://localhost:1313/static/js/bootstrap.min.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33624274-1', 'robotamer.com');
  ga('send', 'pageview');
</script>

  </body>

</html>
